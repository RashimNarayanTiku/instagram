<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    {% load static %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href='{% static "css/base.css" %}'>

    <script src='{% static "js/jquery.waypoints.min.js" %}'></script>
    <script src='{% static "js/infinite.min.js" %}'></script>
    
    {% block head %} {% endblock %}
    </head>
    <body>

    {{ request.user.id|json_script:"user_id" }}
      
    <!-- Single Post View -->
    <div class="modal fade single-post-view" id='single-post-view' tabindex="-1" role="dialog" aria-labelledby="share-modalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body single-post-content row justify-content-center" style="padding-left:0;">
          </div>
        </div>
      </div>
    </div>

    
    
    <title>{% block title %} {% endblock %}</title>
    
  </head>

  {% block navbar %}
  {% if user.is_authenticated %}
    <nav class="nav bg-white justify-content-center align-items-center list-inline" >

        <ul class='col-md-9 col-12' type='none'>
          <li class="col-3 col-md-4"><a href="/"><img alt="Instagram" class="logo" src="{% static 'img/logo.png' %}"></a></li>
          <li class='search col-4 d-none d-md-block justify-content-center align-items-center'>
            <form class="search-form" onsubmit="event.preventDefault()" autocomplete="off">
              <input id="user-input" type="text" placeholder="&#xF002; Search" style="font-family:Arial, FontAwesome" aria-label="Search" onfocus="clearField(this)">
              <svg id='load-icon' aria-label="Loading..." class="fa-spin" viewBox="0 0 100 100" "><rect fill="#555555" height="6" opacity="0" rx="3" ry="3" transform="rotate(-90 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.08333333333333333" rx="3" ry="3" transform="rotate(-60 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.16666666666666666" rx="3" ry="3" transform="rotate(-30 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.25" rx="3" ry="3" transform="rotate(0 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.3333333333333333" rx="3" ry="3" transform="rotate(30 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.4166666666666667" rx="3" ry="3" transform="rotate(60 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.5" rx="3" ry="3" transform="rotate(90 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.5833333333333334" rx="3" ry="3" transform="rotate(120 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.6666666666666666" rx="3" ry="3" transform="rotate(150 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.75" rx="3" ry="3" transform="rotate(180 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.8333333333333334" rx="3" ry="3" transform="rotate(210 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.9166666666666666" rx="3" ry="3" transform="rotate(240 50 50)" width="25" x="72" y="47"></rect></svg>
            </form>
            <div class="triangle-up"></div>
            <div id='search-results'>
              {% include 'post/search.html' %}
            </div>
          </li>

          <li class="nav-links col-md-4 col-9 d-flex justify-content-end">

            <div class='nav-link-item col-2' id='home'>
              <a href="{%url 'post_list' %}">
                <svg aria-label="Home" class="_8-yf5 " fill="#262626" height="22" viewBox="0 0 48 48" width="22"><path d="M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z"></path>
                </svg>
              </a>
            </div>
            <div class='nav-link-item col-2' id='inbox-notification'>
              <!-- inbox notif -->
              <span class='message-notif'>
                <a href="{%url 'inbox_list' %}">
                  <svg aria-label="Share Post" data-toggle="modal" data-target="#share-modal-{{post.id}}" fill="#262626" height="24" viewBox="0 0 48 48" width="24">
                    <path d="M47.8 3.8c-.3-.5-.8-.8-1.3-.8h-45C.9 3.1.3 3.5.1 4S0 5.2.4 5.7l15.9 15.6 5.5 22.6c.1.6.6 1 1.2 1.1h.2c.5 0 1-.3 1.3-.7l23.2-39c.4-.4.4-1 .1-1.5zM5.2 6.1h35.5L18 18.7 5.2 6.1zm18.7 33.6l-4.4-18.4L42.4 8.6 23.9 39.7z">
                    </path>
                  </svg>                    
                </a>
              </span>
            </div>

            <div class='nav-link-item col-2' id='explore'>
              <a href="{% url 'explore' %}">
                <svg aria-label="Find People" class="_8-yf5 " fill="#262626" height="22" viewBox="0 0 48 48" width="22"><path clip-rule="evenodd" d="M24 0C10.8 0 0 10.8 0 24s10.8 24 24 24 24-10.8 24-24S37.2 0 24 0zm0 45C12.4 45 3 35.6 3 24S12.4 3 24 3s21 9.4 21 21-9.4 21-21 21zm10.2-33.2l-14.8 7c-.3.1-.6.4-.7.7l-7 14.8c-.3.6-.2 1.3.3 1.7.3.3.7.4 1.1.4.2 0 .4 0 .6-.1l14.8-7c.3-.1.6-.4.7-.7l7-14.8c.3-.6.2-1.3-.3-1.7-.4-.5-1.1-.6-1.7-.3zm-7.4 15l-5.5-5.5 10.5-5-5 10.5z" fill-rule="evenodd"></path>
              </svg>
              </a>
            </div>

            <div class='nav-link-item col-2 justify-content-center' id='notification'>
              <!-- other notif -->
              <div class='col-12'>
                <a class="notification-btn" id="notification-btn-{{post.id}}">
                  <svg aria-label="Like" class="_8-yf5 " fill="#262626" height="25" viewBox="0 0 48 48" width="26" >
                    <path d="M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z">
                    </path>
                  </svg>
                </a>
              </div>
          </div>
          <div id='notification-display'>
          </div>
            <div class="dropdown nav-link-item col-2">
                <a  href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                    <img class='rounded-circle' src={{user.user.photo.url}} style='width: 25px; height: 23px;'>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown"  >
                    <a class="dropdown-item" href="{% url 'profile' user.username %}">Profile</a>
                    <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                </div>
            </div>
          </li>
        </ul>
    </nav>
  {% endif %}
  {% endblock %}
  
<body>
  {% block single-post-view %} {% endblock %}

    <main role="main" class="container-fluid">
      <div class='row justify-content-center'>

        <div class='main-content col-xs-12 col-md-11 col-lg-6'>
          {% block welcome %} {% endblock %}
          {% block messages %}
              {% if messages %}
                  {% for msg in messages %}
                      <div class="alert alert-{{msg.level_tag}}" role="alert">
                          {{msg.message}}
                      </div>
                  {% endfor %}
              {% endif %}
          {% endblock %}
              
          <!-- jQuery first, then Popper.js, then Bootstrap JS -->
          <script src="{% static 'js/base.js' %}"> </script>
          {% block content %}{% endblock %}
          {% block js %}{% endblock %}
        </div>

        <div class="side-content col-md-3 d-none d-lg-block ">
          <div class="content-section">
            <h3>Our Sidebar</h3>
            <p class='text-muted'>You can put any information here you'd like.
              <ul class="list-group">
                <li class="list-group-item list-group-item-light">Latest Posts</li>
                <li class="list-group-item list-group-item-light">Announcements</li>
                <li class="list-group-item list-group-item-light">Calendars</li>
                <li class="list-group-item list-group-item-light">etc</li>
              </ul>
            </p>
          </div>
        </div> 
       
        </div>
      </div>
    </main>
  </body>
</html>