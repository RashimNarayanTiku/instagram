{% extends "user/base.html" %}
{% load humanize %}
{% load static %}

{% block title %} Instagram {% endblock %}


{% block content %}
  <div class= infinite-container>

    {% for post in posts %}
      <article class="infinite-item post" id='post-{{post.id}}'>
        <div class='post-overlay'>
          <img class="btn article-img all-comments" id='all-comments-{{post.id}}' src="{{ post.photo.url }}"> 
          <div class="post-overlay all-comments" id='all-comments-{{post.id}}'>
            <div class="overlay-text">
              <i class='fa fa-heart col-2'></i>  {{post.post_likes.count}}       
              <span class='col-3'></span>
              <i class='fas fa-comment p-0 col-2'></i>{{post.post_comments.count}}
            </div>
          </div>
  
        </div>

        
      </article>

    {% endfor %}
  </div>
  
  <svg aria-label="Loading..." class="loading-posts fa-spin" viewBox="0 0 100 100" style="width:5%; margin-left:60%;"><rect fill="#555555" height="6" opacity="0" rx="3" ry="3" transform="rotate(-90 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.08333333333333333" rx="3" ry="3" transform="rotate(-60 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.16666666666666666" rx="3" ry="3" transform="rotate(-30 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.25" rx="3" ry="3" transform="rotate(0 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.3333333333333333" rx="3" ry="3" transform="rotate(30 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.4166666666666667" rx="3" ry="3" transform="rotate(60 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.5" rx="3" ry="3" transform="rotate(90 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.5833333333333334" rx="3" ry="3" transform="rotate(120 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.6666666666666666" rx="3" ry="3" transform="rotate(150 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.75" rx="3" ry="3" transform="rotate(180 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.8333333333333334" rx="3" ry="3" transform="rotate(210 50 50)" width="25" x="72" y="47"></rect><rect fill="#555555" height="6" opacity="0.9166666666666666" rx="3" ry="3" transform="rotate(240 50 50)" width="25" x="72" y="47"></rect></svg>

  {% if page_obj.has_next %}
    <a class='infinite-more-link' href='?page={{page_obj.next_page_number }}'></a>
  {% endif%}      

{% endblock %}

{% block js %}
  <script src='{% static "js/jquery.waypoints.min.js" %}'></script>
  <script src='{% static "js/infinite.min.js" %}'></script>
  <script>
    var infinite = new Waypoint.Infinite({
      element: $('.infinite-container')[0],
      offset: 'bottom-in-view',
      onBeforePageLoad: function () {
        $('.loading-posts').show()
      },
      onAfterPageLoad: function () {
        $('.loading-posts').hide()
      },
    })
  </script> 

{% endblock%}